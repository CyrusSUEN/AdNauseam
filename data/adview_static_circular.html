<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>AdNauseam</title>
		<link rel="stylesheet" href="style.css">
		<script src="lib/jquery.js"></script>
		<script src="lib/packery/bower_components/get-style-property/get-style-property.js"></script>
		<script src="lib/packery/bower_components/get-size/get-size.js"></script>
		<script src="lib/packery/bower_components/matches-selector/matches-selector.js"></script>
		<script src="lib/packery/bower_components/eventEmitter/EventEmitter.js"></script>
		<script src="lib/packery/bower_components/eventie/eventie.js"></script>
		<script src="lib/packery/bower_components/doc-ready/doc-ready.js"></script>
		<script src="lib/packery/bower_components/classie/classie.js"></script>
		<script src="lib/packery/bower_components/outlayer/item.js"></script>
		<script src="lib/packery/bower_components/outlayer/outlayer.js"></script>
		<script src="lib/packery/js/rect.js"></script>
		<script src="lib/packery/js/packer.js"></script>
		<script src="lib/packery/js/item.js"></script>
		<script src="lib/packery/js/packery.js"></script>
		<script src="lib/packery/examples/examples.js"></script>
		<script>    
			// testing viewport measurements
			$(document).ready(function() {
			    $("body").append('<div id="measurements"></div>');
			    $("#measurements").css({
			        'position': 'fixed',
			        'bottom': '0',
			        'left': '0',
			        'background-color': 'black',
			        'color': 'white',
			        'padding': '5px',
			        'font-size': '10px',
			        'opacity': '0.4'
			    });
			    getDimensions = function(){
			    	return $('#container').width() + ' x ' +$('#container').height();
			        //return $(window).width() + ' (' + $(document).width() + ') x ' + $(window).height() + ' (' + $(document).height() + ')';
			    }
			    $("#measurements").text(getDimensions());
			    $(window).on("resize", function(){
			        $("#measurements").text(getDimensions());
			    });
			});
    	</script>		
	</head>
	<body>
		<div class="stage">
			<div id="logo"><a href="http://rednoise.org/adnauseam/" target="new"></a></div>
			<div class="zoom">
				<a href="" id="z-in">&#10010;</a>
				<a href="" id="z-out">&#8211;</a>
			</div>
			<div class="session-sum">
				Since January 12, 2014: <strong>2100 ads detected, 1190 visited.</strong>
			</div>
			<div id='container'>
				<a class="item dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://graphics8.nytimes.com/adx/images/ADS/36/24/ad.362487/14-2642-NYTS_VDay_184x90_MS3.jpg" alt="img alt"></a>
				
				<!-- this one get stucks in circular layout, or perhaps it is just the largest that gets stuck --> 
				<a class="item dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://graphics8.nytimes.com/adx/images/ADS/35/92/ad.359256/13_2259_INYT_Anon_USD_970x44_ER1.jpg" alt="img alt"></a>
				
				<a class="item pending dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://graphics8.nytimes.com/adx/images/ADS/35/92/ad.359251/13_2259_INYT_Anon_USD_163x90_ER1.jpg" alt="img alt"></a>
				<a class="item dup-count-4" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">4</span><img src="http://img.wpdigital.net/wp-srv/ad/public/static/22285/subscribe-200x60.png" alt="img alt"></a>
				<a class="item dup-count-2" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">2</span><img src="http://img.wpdigital.net/wp-srv/ad/public/static/22285/610x90-text-001.gif" alt="img alt"></a>
				<a class="item dup-count-3" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">3</span><img src="http://pagead2.googlesyndication.com/pagead/imgad?id=CICAgMCuxI6WtgEQoAEY2AQyCNMurS37z_f4" alt="img alt"></a>
				<a class="item dup-count-2" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">2</span><img src="http://pagead2.googlesyndication.com/pagead/imgad?id=CICAgMCuxI7GyQEQtAEYlgEyCLMSwgnecZ_K" alt="img alt"></a>
				<a class="item dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://graphics8.nytimes.com/adx/images/ADS/35/92/ad.359250/13_2259_INYT_Anon_USD_120x90_ER1.jpg" alt="img alt"></a>
				<a class="item pending dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://graphics8.nytimes.com/adx/images/ADS/36/11/ad.361146/GBH_NYT96x60_Revised-1.gif" alt="img alt"></a>
				<a class="item dup-count-2" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">2</span><img src="http://graphics8.nytimes.com/adx/images/ADS/35/82/ad.358278/MSMH8_photo.gif" alt="img alt"></a>
				<a class="item dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://aka-cdn-ns.adtechus.com/images/265/Ad0St1Sz170Sq0V1Id22163209.jpg" alt="img alt"></a>
				<a class="item pending dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://aka-cdn-ns.adtechus.com/images/3/Ad0St1Sz457Sq0V2Id22141443.jpg" alt="img alt"></a>
				<a class="item dup-count-6" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">6</span><img src="http://static.adzerk.net/Advertisers/b2cd8e73d2f641628eb87fb6db7831cf.png" alt="img alt"></a>
				<a class="item dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://www.winwin.co.il/AttractiveAds_Media/853729_04e5a579-c63b-4bed-b.jpg.ashx?width=121&height=78" alt="img alt"></a>
				<a class="item pending dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://static.adzerk.net/Advertisers/e800de8d3ba845528d5efbc25c63e650.png" alt="img alt"></a>
				<a class="item pending dup-count-1" data-detected="[timestamp]" data-visited="[timestamp]" href="#target-url" data-origin="#origin-url"><span class="counter">1</span><img src="http://www.launchbit.com/taz-i/4646-4626.png" alt="img alt"></a>
			</div>
		</div>
		<aside>
			<a href="#" class="panel-resize"></a>
			<div class="inspect carousel">
				<ul class="panes">
					<li class="active">
						<a href="#"><img class="inspected" src="#" alt=""></a>
						<div class="num-of">1 / 5</div>
						<div class="details">
							<dl>
								<dd>Leads to:</dd>
									<dt><a href="http://" class="target">--</a></dt>
								<dd>Visited:</dd>
									<dt class="visited">--</dt>
								<dd>Viewed On:</dd>
									<dt><a href="http://" class="origin">--</a></dt>
								<dd>Detected:</dd>
									<dt class="detected">--</dt>
							</dl>
						</div>
					</li>
					<li class="">
						<a href="#"><img class="inspected" src="http://static.adzerk.net/Advertisers/b2cd8e73d2f641628eb87fb6db7831cf.png" alt="inspected image text"></a>
						<div class="num-of">2 / 5</div>
						<div class="details">
							<dl>
								<dd>Leads to:</dd>
									<dt><a href="http://" class="target">washingtonpost.com/</a></dt>
								<dd>Visited:</dd>
									<dt class="visited">pending</dt>
								<dd>Viewed On:</dd>
									<dt><a href="http://" class="origin">washingtonpost.com/</a></dt>
								<dd>Detected:</dd>
									<dt class="detected">04:32:18, Jan 22, 2014</dt>
							</dl>
						</div>
					</li>
					<li class="">
						<a href="#"><img class="inspected" src="http://static.adzerk.net/Advertisers/b2cd8e73d2f641628eb87fb6db7831cf.png" alt="inspected image text"></a>
						<div class="num-of">3 / 5</div>
						<div class="details">
							<dl>
								<dd>Leads to:</dd>
									<dt><a href="http://" class="target">washingtonpost.com/</a></dt>
								<dd>Visited:</dd>
									<dt class="visited">pending</dt>
								<dd>Viewed On:</dd>
									<dt><a href="http://" class="origin">washingtonpost.com/</a></dt>
								<dd>Detected:</dd>
									<dt class="detected">04:32:18, Jan 22, 2014</dt>
							</dl>
						</div>
					</li>
					<li class="">
						<a href="#"><img class="inspected" src="http://static.adzerk.net/Advertisers/b2cd8e73d2f641628eb87fb6db7831cf.png" alt="inspected image text"></a>
						<div class="num-of">4 / 5</div>
						<div class="details">
							<dl>
								<dd>Leads to:</dd>
									<dt><a href="http://" class="target">washingtonpost.com/</a></dt>
								<dd>Visited:</dd>
									<dt class="visited">pending</dt>
								<dd>Viewed On:</dd>
									<dt><a href="http://" class="origin">washingtonpost.com/</a></dt>
								<dd>Detected:</dd>
									<dt class="detected">04:32:18, Jan 22, 2014</dt>
							</dl>
						</div>
					</li>
					<li class="">
						<a href="#"><img class="inspected" src="http://static.adzerk.net/Advertisers/b2cd8e73d2f641628eb87fb6db7831cf.png" alt="inspected image text"></a>
						<div class="num-of">5 / 5</div>
						<div class="details">
							<dl>
								<dd>Leads to:</dd>
									<dt><a href="http://" class="target">washingtonpost.com/</a></dt>
								<dd>Visited:</dd>
									<dt class="visited">pending</dt>
								<dd>Viewed On:</dd>
									<dt><a href="http://" class="origin">washingtonpost.com/</a></dt>
								<dd>Detected:</dd>
									<dt class="detected">04:32:18, Jan 22, 2014</dt>
							</dl>
						</div>
					</li>
				</ul>
				<!--
				<ul class="controls">
					<li class="active"><a href="#" class="btn circle"></a></li>
					<li><a href="#" class="btn circle"></a></li>
					<li><a href="#" class="btn circle"></a></li>
					<li><a href="#" class="btn circle"></a></li>
				</ul>
				-->
			</div>
		</aside>
		<div id='json'>json</div>
		<script>

			var container = document.querySelector('#container');
			var pckry = new Packery( container, {
    		  	centered: {
	        		// x: 400,
        			y: 300
      			},
			  	itemSelector: '.item',
			  	gutter: 1
			});

			$(document).ready(function() {

				if (ratio == null) {
					var ratio = 1.5; // sets initial item resize aspect ratio
				}

				// resizing each image according to aspect ratio
				function resize() {
					
	    		$('.item img').each(function(i, img) {
						$(img).css({
							'width': $(img).width()/ratio ,
							'height': $(img).height()/ratio
						});
					});
					pckry.layout(); // rearrange everything
					console.log( ratio );
				}

				resize(ratio);

				// zoom-in
				$('#z-in').live('click', function () {  
					ratio+=0.5;
					console.log( ratio );
					resize(ratio);
	    	});

				// zoom-out
				$('#z-out').live('click', function () {  
					ratio-=0.5;
					console.log( ratio );
					resize(ratio);
	    	});

			});


			$( '.item' ).hover(
			 	function() {
			 			var dup = $('span', this).text();
			 			$('.panes').addClass('animate');
			 			for (var i = 0; i < dup; i++) {
				   		$('.inspect img').attr('src', $('img', this).attr('src')); // copy hovered image attributes into inspector
				   		$('.inspect img').attr('alt', $('img', this).attr('alt')); // copy hovered image attributes into inspector
				   		$('.target','.inspect li:nth-child('+(i+1)+')').text($(this).attr('href'));
				   		$('.visited','.inspect li:nth-child('+(i+1)+')').text($(this).attr('data-visited'));
				   		$('.origin','.inspect li:nth-child('+(i+1)+')').text($(this).attr('data-origin'));
				   		$('.detected','.inspect li:nth-child('+(i+1)+')').text($(this).attr('data-detected'));			 				
			 			};
			 	}, function() {
			 		$('.panes').removeClass('animate');
			 	}
			);
		</script>
	</body>
</html>